!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t.ng=t.ng||{},t.ng.tsObjectHash=t.ng.tsObjectHash||{}))}(this,function(t){"use strict";function r(t,r){return r=n(t,r),i(t,r)}function n(t,r){if(r=r||{},r.algorithm=r.algorithm||"sha1",r.encoding=r.encoding||"hex",r.excludeValues=!!r.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===r.ignoreUnknown,r.respectType=!1!==r.respectType,r.respectFunctionNames=!1!==r.respectFunctionNames,r.respectFunctionProperties=!1!==r.respectFunctionProperties,r.unorderedArrays=!0===r.unorderedArrays,r.unorderedSets=!1!==r.unorderedSets,r.replacer=r.replacer||void 0,void 0===t)throw new Error("Object argument required.");for(var n=0;n<f.length;++n)r.algorithm&&f[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=f[n]);if(-1===f.indexOf(r.algorithm))throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===p.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+p.join(", "));return r}function e(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function i(t,r){var n;if(void 0===(n="passthrough"!==r.algorithm?c.createHash(r.algorithm):Object.create(u())).write&&(n.write=n.update,n.end=n.update),o(r,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===r.encoding?void 0:r.encoding);var e=n.read();return"buffer"===r.encoding?e:e.toString(r.encoding)}function o(t,r,n){n=n||[];var i=function(t,n){return r&&r.update?r.update(t,"utf8"):r&&r.write?r.write(t,"utf8"):void 0};return{dispatch:function(r){t.replacer&&(r=t.replacer(r));var n=typeof r;return null===r&&(n="null"),this["_"+n](r)},_object:function(r){var o=/\[object (.*)\]/i,u=Object.prototype.toString.call(r),c=o.exec(u);c=(c=c?c[1]:"unknown:["+u+"]").toLowerCase();var a=null;if(n){if((a=n.indexOf(r))>=0)return this.dispatch("[CIRCULAR:"+a+"]");n.push(r)}if("undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(r))return i("buffer:"),i(r);if("object"===c||"function"===c){var s=Object.keys(r).sort();!1===t.respectType||e(r)||s.splice(0,0,"prototype","__proto__","constructor"),i("object:"+s.length+":");var f=this;return s.forEach(function(n){f.dispatch(n),i(":"),t.excludeValues||f.dispatch(r[n]),i(",")})}if(!this["_"+c]){if(t.ignoreUnknown)return i("["+c+"]");throw new Error('Unknown object type "'+c+'"')}this["_"+c](r)},_array:function(r,e){e=void 0!==e?e:!1!==t.unorderedArrays;var c=this;if(i("array:"+r.length+":"),!e||r.length<=1)return r.forEach(function(t){return c.dispatch(t)});var a=[],s=r.map(function(r){var e=Object.create(u()),i=n.slice();return o(t,e,i).dispatch(r),a=a.concat(i.slice(n.length)),e.read().toString()});return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return i("date:"+t.toJSON())},_symbol:function(t){return i("symbol:"+t.toString())},_error:function(t){return i("error:"+t.toString())},_boolean:function(t){return i("bool:"+t.toString())},_string:function(t){i("string:"+t.length+":"),i(t)},_function:function(r){i("fn:"),e(r)?this.dispatch("[native]"):this.dispatch(r.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(r.name)),t.respectFunctionProperties&&this._object(r)},_number:function(t){return i("number:"+t.toString())},_xml:function(t){return i("xml:"+t.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(t){return i("regex:"+t.toString())},_uint8array:function(t){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return i("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return i("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return i("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return i("url:"+t.toString())},_map:function(r){i("map:");var n=Array.from(r);return this._array(n,!1!==t.unorderedSets)},_set:function(r){i("set:");var n=Array.from(r);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function u(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}var c=require("webcrypto"),a=function(){return function(){this.algorithm="sha1",this.excludeValues=!1,this.encoding="hex",this.ignoreUnknown=!1,this.respectFunctionProperties=!0,this.respectFunctionNames=!0,this.respectType=!0,this.unorderedArrays=!1,this.unorderedSets=!0}}(),s=function(){return function(){}}(),f=c.getHashes?c.getHashes().slice():["sha1","md5"];f.push("passthrough");var p=["buffer","hex","binary","base64"];t.OptionsObject=a,t.StreamObject=s,t.objectHash=r,t.sha1=function(t){return r(t)},t.keys=function(t){return r(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(t){return r(t,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(t){return r(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})},t.writeToStream=function(t,r,e){return void 0===e&&(e=r,r={}),r=n(t,r),o(r,e).dispatch(t)},Object.defineProperty(t,"__esModule",{value:!0})});