!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t.ng=t.ng||{},t.ng.tsObjectHash=t.ng.tsObjectHash||{}))}(this,function(t){"use strict";function r(t,r){return r=u(t,r),a(t,r)}function n(t){return r(t)}function e(t){return r(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})}function i(t){return r(t,{algorithm:"md5",encoding:"hex"})}function o(t){return r(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})}function u(t,r){if(r=r||{},r.algorithm=r.algorithm||"sha1",r.encoding=r.encoding||"hex",r.excludeValues=!!r.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===r.ignoreUnknown,r.respectType=!1!==r.respectType,r.respectFunctionNames=!1!==r.respectFunctionNames,r.respectFunctionProperties=!1!==r.respectFunctionProperties,r.unorderedArrays=!0===r.unorderedArrays,r.unorderedSets=!1!==r.unorderedSets,r.replacer=r.replacer||void 0,void 0===t)throw new Error("Object argument required.");for(var n=0;n<g.length;++n)r.algorithm&&g[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=g[n]);if(-1===g.indexOf(r.algorithm))throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+g.join(", "));if(-1===y.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+y.join(", "));return r}function c(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function a(t,r){var n;if(void 0===(n="passthrough"!==r.algorithm?d.createHash(r.algorithm):Object.create(p())).write&&(n.write=n.update,n.end=n.update),f(r,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===r.encoding?void 0:r.encoding);var e=n.read();return"buffer"===r.encoding?e:e.toString(r.encoding)}function s(t,r,n){return void 0===n&&(n=r,r={}),r=u(t,r),f(r,n).dispatch(t)}function f(t,r,n){n=n||[];var e=function(t,n){return r&&r.update?r.update(t,"utf8"):r&&r.write?r.write(t,"utf8"):void 0};return{dispatch:function(r){t.replacer&&(r=t.replacer(r));var n=typeof r;return null===r&&(n="null"),this["_"+n](r)},_object:function(r){var i=/\[object (.*)\]/i,o=Object.prototype.toString.call(r),u=i.exec(o);u=(u=u?u[1]:"unknown:["+o+"]").toLowerCase();var a=null;if(n){if((a=n.indexOf(r))>=0)return this.dispatch("[CIRCULAR:"+a+"]");n.push(r)}if("undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(r))return e("buffer:"),e(r);if("object"===u||"function"===u){var s=Object.keys(r).sort();!1===t.respectType||c(r)||s.splice(0,0,"prototype","__proto__","constructor"),e("object:"+s.length+":");var f=this;return s.forEach(function(n){f.dispatch(n),e(":"),t.excludeValues||f.dispatch(r[n]),e(",")})}if(!this["_"+u]){if(t.ignoreUnknown)return e("["+u+"]");throw new Error('Unknown object type "'+u+'"')}this["_"+u](r)},_array:function(r,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(e("array:"+r.length+":"),!i||r.length<=1)return r.forEach(function(t){return o.dispatch(t)});var u=[],c=r.map(function(r){var e=Object.create(p()),i=n.slice();return f(t,e,i).dispatch(r),u=u.concat(i.slice(n.length)),e.read().toString()});return n=n.concat(u),c.sort(),this._array(c,!1)},_date:function(t){return e("date:"+t.toJSON())},_symbol:function(t){return e("symbol:"+t.toString())},_error:function(t){return e("error:"+t.toString())},_boolean:function(t){return e("bool:"+t.toString())},_string:function(t){e("string:"+t.length+":"),e(t)},_function:function(r){e("fn:"),c(r)?this.dispatch("[native]"):this.dispatch(r.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(r.name)),t.respectFunctionProperties&&this._object(r)},_number:function(t){return e("number:"+t.toString())},_xml:function(t){return e("xml:"+t.toString())},_null:function(){return e("Null")},_undefined:function(){return e("Undefined")},_regexp:function(t){return e("regex:"+t.toString())},_uint8array:function(t){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return e("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return e("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return e("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return e("url:"+t.toString())},_map:function(r){e("map:");var n=Array.from(r);return this._array(n,!1!==t.unorderedSets)},_set:function(r){e("set:");var n=Array.from(r);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return e("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return e("domwindow")},_process:function(){return e("process")},_timer:function(){return e("timer")},_pipe:function(){return e("pipe")},_tcp:function(){return e("tcp")},_udp:function(){return e("udp")},_tty:function(){return e("tty")},_statwatcher:function(){return e("statwatcher")},_securecontext:function(){return e("securecontext")},_connection:function(){return e("connection")},_zlib:function(){return e("zlib")},_context:function(){return e("context")},_nodescript:function(){return e("nodescript")},_httpparser:function(){return e("httpparser")},_dataview:function(){return e("dataview")},_signal:function(){return e("signal")},_fsevent:function(){return e("fsevent")},_tlswrap:function(){return e("tlswrap")}}}function p(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}var d=require("webcrypto"),h=function(){function t(){this.algorithm="sha1",this.excludeValues=!1,this.encoding="hex",this.ignoreUnknown=!1,this.respectFunctionProperties=!0,this.respectFunctionNames=!0,this.respectType=!0,this.unorderedArrays=!1,this.unorderedSets=!0}return t}(),l=function(){function t(){}return t}(),g=d.getHashes?d.getHashes().slice():["sha1","md5"];g.push("passthrough");var y=["buffer","hex","binary","base64"];t.OptionsObject=h,t.StreamObject=l,t.objectHash=r,t.sha1=n,t.keys=e,t.MD5=i,t.keysMD5=o,t.writeToStream=s,Object.defineProperty(t,"__esModule",{value:!0})});